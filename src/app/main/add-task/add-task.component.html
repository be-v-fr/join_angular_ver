<div class="content" (click)="handleGeneralClick()">
    <h2>Add Task</h2>
    <form>
        <div class="form-main">
            <div class="form-side">
                <div class="form-field">
                    <label for="title">Title<span class="marked-red">*</span></label>
                    <input type="text" name="title" id="title" placeholder="Enter a title">
                </div>
                <div class="form-field">
                    <label for="description">Description</label>
                    <textarea type="text" name="description" id="description"
                        placeholder="Enter a description"></textarea>
                </div>
                <div class="form-field">
                    <label for="assigend">Assigned to</label>
                    <input type="text" name="assigned" id="assigned" value="Select contacts to assign">
                </div>
            </div>
            <div class="vertical-ruler"></div>
            <div class="form-side">
                <div class="form-field">
                    <label for="due">Due date<span class="marked-red">*</span></label>
                    <input type="date" name="due" id="due">
                </div>
                <div class="form-field">
                    <label for="prio">Prio</label>
                    <div class="prio-btns">
                        <input type="hidden" name="prio" id="prio" value="{{prio}}">
                        <button type="button" (click)="selectPrio('Urgent')"
                            [ngClass]="{'selected urgent': prio == 'Urgent'}">
                            <span>Urgent</span>
                            @if(prio == 'Urgent') {
                            <img src="../../../assets/img/prio/task_prio_urgent_white.svg" alt="urgent selected">
                            } @else {
                            <img src="../../../assets/img/prio/task_prio_urgent.svg" alt="select urgent">
                            }
                        </button>
                        <button type="button" (click)="selectPrio('Medium')"
                            [ngClass]="{'selected medium': prio == 'Medium'}">
                            <span>Medium</span>
                            @if(prio == 'Medium') {
                            <img src="../../../assets/img/prio/task_prio_medium_white.svg" alt="medium selected">
                            } @else {
                            <img src="../../../assets/img/prio/task_prio_medium.svg" alt="select medium">
                            }
                        </button>
                        <button type="button" (click)="selectPrio('Low')" [ngClass]="{'selected low': prio == 'Low'}">
                            <span>Low</span>
                            @if(prio == 'Low') {
                            <img src="../../../assets/img/prio/task_prio_low_white.svg" alt="low selected">
                            } @else {
                            <img src="../../../assets/img/prio/task_prio_low.svg" alt="select low">
                            }
                        </button>
                    </div>
                </div>
                <div class="form-field">
                    <label for="category" (click)="$event.preventDefault()">Category<span
                            class="marked-red">*</span></label>
                    <input type="hidden" name="category" id="category" value="{{category}}">
                    <div class="dropdown-container">
                        <div class="dropdown-input" (click)="toggleCategoryDropdown($event)">
                            @if(category == null) {
                            Select task category
                            } @else {
                            {{category}}
                            }
                            <button type="button" class="dropdown-arrow-btn">
                                <img src="../../../assets/img/select_icon.svg" alt="icon"
                                    [ngClass]="{'turn': showCategoryDropdown}">
                            </button>
                        </div>
                        <ul class="dropdown-menu" *ngIf="showCategoryDropdown">
                            <li (click)="setCategory('Technical Task')">Technical Task</li>
                            <li (click)="setCategory('User Story')">User Story</li>
                        </ul>
                    </div>
                </div>
                <div class="form-field">
                    <label for="subtasks">Subtasks</label>
                    <input type="text" name="subtasks" id="subtasks" placeholder="Add new subtask">
                </div>
            </div>
        </div>
        <div class="form-bottom">
            <ul class="subtasks-list">
                @for (subtask of subtasks; track subtask; let i = $index) {
                <app-subtask [task]="subtask" (delete)="deleteSubtask(i)"></app-subtask>
                }
            </ul>
            <p class="font-small"><span class="marked-red">*</span>This field is required</p>
            <div class="btns-submit">
                <button type="reset" class="btn-secondary">
                    Clear
                    <div class="img-container">
                        <img src="../../../assets/img/cancel.svg" class="secondary-neutral" alt="clear">
                        <img src="../../../assets/img/cancel_hover.svg" class="secondary-hover" alt="clear">
                        <img src="../../../assets/img/cancel_active.svg" class="secondary-active" alt="clear">
                    </div>
                </button>
                <button type="submit" class="btn-primary">
                    Create Task
                    <img src="../../../assets/img/check_white.svg" alt="create task">
                </button>
            </div>
        </div>
    </form>
</div>